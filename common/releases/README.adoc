= Releases sub-package
Alessandro Sanino <a.sanino@arduino.cc>

This package allows to handle all types of releases (Libraries, Cores and Tools)

== The Release interface
This package comes with a useful interface:
[source, go]
----
type Release interface {
	// ExpectedChecksum returns the expected checksum for this release.
	ExpectedChecksum() string
	// ArchiveName returns the archive file name (not the path).
	ArchiveName() string
	// ArchiveURL returns the archive URL.
	ArchiveURL() string
	// ArchiveSize returns the archive size.
	ArchiveSize() int64
	// GetDownloadCacheFolder returns the path of the staging folders for this release.
	GetDownloadCacheFolder() (string, error)
	// VersionName represents the version of the release.
	VersionName() string
}
----
This interface is implemented by `libraries.Release`, `cores.Release` and `cores.ToolRelease`.

==== Checksums
Every download of a Release must be checked for integrity:
the functions in the link:./checksums.go[checksums.go] File provide this feature
An example can be found in checkLocalArchive function:
[source, go]
----
// checkLocalArchive check for integrity of the local archive.
func checkLocalArchive(release Release) error {
	archivePath, err := ArchivePath(release)
	if err != nil {
		return err
	}
	stats, err := os.Stat(archivePath)
	if os.IsNotExist(err) {
		return errors.New("Archive does not exist")
	}
	if err != nil {
		return err
	}
	if stats.Size() > release.ArchiveSize() {
		return errors.New("Archive size does not match with specification of this release, assuming corruption")
	}
	if !checksumMatches(release) {
		return errors.New("Checksum does not match, assuming corruption")
	}
	return nil
}
----

Where `checksumMatches` checks if the checksum provided with the specified `index_file.json` equals the one
generated by the `CLI`.

== Downloading a Release
It can be easily done using the `ParallelDownload` function:

==== Usage: 
[source, go]
----
func ParallelDownload(items []DownloadItem, forced bool, OkStatus string, verbosity int, refResults *[]output.ProcessResult, label string)
----
